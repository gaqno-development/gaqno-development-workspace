#!/bin/sh
# Secret scanning before commit. Install gitleaks (e.g. brew install gitleaks) to enable.

if ! command -v gitleaks >/dev/null 2>&1; then
  echo "⚠️  gitleaks not installed — skipping secret scan. Install: brew install gitleaks"
  exit 0
fi

cd "$(git rev-parse --show-toplevel)" && gitleaks protect --config .gitleaks.toml --staged --verbose
exit $?
