# Jira Planning Artifacts

**Generated by:** Technical Program Manager subagent  
**Date:** 2025-02-05  
**Source:** Aggregated findings from frontend-architecture-enforcer, contracts-types-guardian, system-architecture-auditor, frontend-documentation-engineer, backend-documentation-engineer

**Usage:** Create these artifacts in Jira via Atlassian MCP or manually. Each epic/story/task includes Confluence doc references.

**Confluence (created):** [Architecture Index](https://gaqno.atlassian.net/wiki/spaces/GD/pages/15728641) | [System Overview](https://gaqno.atlassian.net/wiki/spaces/GD/pages/15761409) | [Frontend Guide](https://gaqno.atlassian.net/wiki/spaces/GD/pages/15794177) | [Backend Guide](https://gaqno.atlassian.net/wiki/spaces/GD/pages/15826945) | [Contracts Guide](https://gaqno.atlassian.net/wiki/spaces/GD/pages/15630354) | [Rules & Guardrails](https://gaqno.atlassian.net/wiki/spaces/GD/pages/15859713)

---

## Epics

### EPIC-1: Architectural Alignment

| Field                  | Value                                                                                                                                                                  |
| ---------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Summary**            | Reduce shell responsibility and align admin platform                                                                                                                   |
| **Goal**               | Shell becomes host-only; admin pages live in dedicated MFE                                                                                                             |
| **Business Impact**    | Faster admin evolution; smaller shell bundle; clearer boundaries                                                                                                       |
| **Technical Impact**   | Decoupled deploy; SRP compliance                                                                                                                                       |
| **Definition of Done** | Shell has no pages in `pages/admin/`; all admin routes served by gaqno-admin-ui                                                                                        |
| **Confluence**         | [01-System-Architecture-Overview](../confluence/01-System-Architecture-Overview.md), [02-Frontend-Architecture-Guide](../confluence/02-Frontend-Architecture-Guide.md) |

---

### EPIC-2: Contract Consolidation

| Field                  | Value                                                                                                                             |
| ---------------------- | --------------------------------------------------------------------------------------------------------------------------------- |
| **Summary**            | Unify types and align DTOs with shared contracts                                                                                  |
| **Goal**               | Single source of truth for domain types; DTOs implement shared interfaces                                                         |
| **Business Impact**    | Fewer integration bugs; faster feature development                                                                                |
| **Technical Impact**   | No type drift; contract-first development                                                                                         |
| **Definition of Done** | backcore is type source; frontcore re-exports; finance DTOs implement CreateTransactionInput                                      |
| **Confluence**         | [04-Contracts-Types-Guide](../confluence/04-Contracts-Types-Guide.md), [API-CONTRACTS-CONVENTION](../API-CONTRACTS-CONVENTION.md) |

---

### EPIC-3: Frontend Cleanup

| Field                  | Value                                                                                                                                                                      |
| ---------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Summary**            | Standardize API client usage and extract logic to hooks                                                                                                                    |
| **Goal**               | All MFEs use frontcore API client; no logic in components                                                                                                                  |
| **Business Impact**    | Consistent error handling; easier maintenance                                                                                                                              |
| **Technical Impact**   | DRY; hooks pattern enforced                                                                                                                                                |
| **Definition of Done** | finance-ui uses frontcore; no local api-client; all pages with logic have hooks                                                                                            |
| **Confluence**         | [02-Frontend-Architecture-Guide](../confluence/02-Frontend-Architecture-Guide.md), [05-Architectural-Rules-Guardrails](../confluence/05-Architectural-Rules-Guardrails.md) |

---

### EPIC-4: Backend Modularization

| Field                  | Value                                                                                                                                                  |
| ---------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **Summary**            | Clarify admin/saas service evolution and DTO alignment                                                                                                 |
| **Goal**               | Documented service boundaries; DTOs implement shared interfaces                                                                                        |
| **Business Impact**    | Clear ownership; scalable service growth                                                                                                               |
| **Technical Impact**   | Contract-first; no orphan DTOs                                                                                                                         |
| **Definition of Done** | admin/saas evolution documented; finance DTOs implement shared                                                                                         |
| **Confluence**         | [03-Backend-Architecture-Guide](../confluence/03-Backend-Architecture-Guide.md), [04-Contracts-Types-Guide](../confluence/04-Contracts-Types-Guide.md) |

---

### EPIC-5: Test Coverage Improvements

| Field                  | Value                                                                             |
| ---------------------- | --------------------------------------------------------------------------------- |
| **Summary**            | Achieve minimum test coverage across MFEs and services                            |
| **Goal**               | Hooks with logic have specs; critical paths covered                               |
| **Business Impact**    | Fewer regressions; confident refactors                                            |
| **Technical Impact**   | TDD culture; regression safety                                                    |
| **Definition of Done** | admin-ui, saas-ui hooks have specs; finance-ui, pdv-ui extended                   |
| **Confluence**         | [02-Frontend-Architecture-Guide](../confluence/02-Frontend-Architecture-Guide.md) |

---

## Stories (by Epic)

### EPIC-1: Architectural Alignment

#### STORY-1.1: Migrate admin pages from shell to gaqno-admin-ui

| Field                   | Value                                                                                                      |
| ----------------------- | ---------------------------------------------------------------------------------------------------------- |
| **Scope**               | Shell pages/admin/\* â†’ gaqno-admin-ui routes                                                               |
| **Acceptance Criteria** | 1. Rotas /admin/_ e /sass/_ servidas por admin MFE 2. Shell sem pages/admin/ 3. Menu aponta para admin MFE |
| **Confluence**          | [02-Frontend-Architecture-Guide](../confluence/02-Frontend-Architecture-Guide.md)                          |

**Tasks:**

- [ ] TASK-1.1.1: Create routes in gaqno-admin-ui for domains, tenants, branches, users (platform), roles, menu, settings, usage, costing
- [ ] TASK-1.1.2: Move or import components from shell to admin-ui
- [ ] TASK-1.1.3: Update shell: remove /admin/_ and /sass/_ routes; load admin MFE for both
- [ ] TASK-1.1.4: Adjust menu config: /sass/_ and /admin/_ point to admin MFE
- [ ] TASK-1.1.5: Validate permissions and scope in admin MFE

---

### EPIC-2: Contract Consolidation

#### STORY-2.1: Unify types (backcore as source)

| Field                   | Value                                                                                                               |
| ----------------------- | ------------------------------------------------------------------------------------------------------------------- |
| **Scope**               | @gaqno-backcore types/shared; @gaqno-frontcore re-exports                                                           |
| **Acceptance Criteria** | 1. frontcore re-exports from backcore 2. No duplicate types in frontcore/types/shared 3. MFEs import from frontcore |
| **Confluence**          | [04-Contracts-Types-Guide](../confluence/04-Contracts-Types-Guide.md)                                               |

**Tasks:**

- [ ] TASK-2.1.1: Add frontcore re-export: `export * from '@gaqno-development/backcore'` for types
- [ ] TASK-2.1.2: Remove duplicate types from frontcore/types/shared
- [ ] TASK-2.1.3: Update MFE imports to use frontcore types

#### STORY-2.2: DTOs implement shared interfaces

| Field                   | Value                                                                                                  |
| ----------------------- | ------------------------------------------------------------------------------------------------------ |
| **Scope**               | gaqno-finance-service DTOs; CreateTransactionDto                                                       |
| **Acceptance Criteria** | 1. CreateTransactionDto implements CreateTransactionInput 2. Workspace package resolution for backcore |
| **Confluence**          | [04-Contracts-Types-Guide](../confluence/04-Contracts-Types-Guide.md)                                  |

**Tasks:**

- [ ] TASK-2.2.1: Resolve workspace package: `@gaqno-development/backcore` or `workspace:*`
- [ ] TASK-2.2.2: CreateTransactionDto implements CreateTransactionInput
- [ ] TASK-2.2.3: Repeat for Category, CreditCard DTOs

---

### EPIC-3: Frontend Cleanup

#### STORY-3.1: Migrate finance-ui to frontcore API client

| Field                   | Value                                                                             |
| ----------------------- | --------------------------------------------------------------------------------- |
| **Scope**               | gaqno-finance-ui; remove lib/api-client.ts                                        |
| **Acceptance Criteria** | 1. finance-ui uses createAxiosClient from frontcore 2. lib/api-client.ts removed  |
| **Confluence**          | [02-Frontend-Architecture-Guide](../confluence/02-Frontend-Architecture-Guide.md) |

**Tasks:**

- [ ] TASK-3.1.1: Create useFinanceApi hook using createAxiosClient
- [ ] TASK-3.1.2: Replace all finance-ui API calls with new hook
- [ ] TASK-3.1.3: Delete lib/api-client.ts

#### STORY-3.2: Break useMasterDashboard into smaller hooks

| Field                   | Value                                                                                                                |
| ----------------------- | -------------------------------------------------------------------------------------------------------------------- |
| **Scope**               | gaqno-rpg-ui useMasterDashboard (~576 lines)                                                                         |
| **Acceptance Criteria** | 1. useMasterSessionData extracted 2. useMasterBattle extracted 3. useMasterDiceRoll extracted 4. No hook > 200 lines |
| **Confluence**          | [05-Architectural-Rules-Guardrails](../confluence/05-Architectural-Rules-Guardrails.md)                              |

**Tasks:**

- [ ] TASK-3.2.1: Extract useMasterSessionData (fetch session, characters, actions, history, memory)
- [ ] TASK-3.2.2: Extract useMasterBattle (battle state, damage, turn)
- [ ] TASK-3.2.3: Extract useMasterDiceRoll (request, handlers)
- [ ] TASK-3.2.4: useMasterDashboard orchestrates sub-hooks

---

### EPIC-4: Backend Modularization

#### STORY-4.1: Document admin/saas service evolution

| Field                   | Value                                                                           |
| ----------------------- | ------------------------------------------------------------------------------- |
| **Scope**               | BACKEND.md; README in admin-service, saas-service                               |
| **Acceptance Criteria** | 1. Decision documented: stubs vs evolution 2. README in each stub service       |
| **Confluence**          | [03-Backend-Architecture-Guide](../confluence/03-Backend-Architecture-Guide.md) |

**Tasks:**

- [ ] TASK-4.1.1: Update BACKEND.md with admin/saas evolution decision (already done)
- [ ] TASK-4.1.2: Add README to admin-service and saas-service

---

### EPIC-5: Test Coverage Improvements

#### STORY-5.1: Add specs for admin-ui hooks

| Field                   | Value                                                                                      |
| ----------------------- | ------------------------------------------------------------------------------------------ |
| **Scope**               | gaqno-admin-ui hooks                                                                       |
| **Acceptance Criteria** | 1. useUsersPage has spec 2. useTenants (if used) has spec 3. useDomains (if used) has spec |
| **Confluence**          | [02-Frontend-Architecture-Guide](../confluence/02-Frontend-Architecture-Guide.md)          |

**Tasks:**

- [ ] TASK-5.1.1: Add useUsersPage.spec.ts
- [ ] TASK-5.1.2: Add specs for other admin hooks

#### STORY-5.2: Add specs for saas-ui hooks

| Field                   | Value                                                                             |
| ----------------------- | --------------------------------------------------------------------------------- |
| **Scope**               | gaqno-saas-ui useCostingData                                                      |
| **Acceptance Criteria** | 1. useCostingData.spec.ts exists 2. Critical paths covered                        |
| **Confluence**          | [02-Frontend-Architecture-Guide](../confluence/02-Frontend-Architecture-Guide.md) |

**Tasks:**

- [ ] TASK-5.2.1: Add useCostingData.spec.ts
- [ ] TASK-5.2.2: Configure vitest in saas-ui if missing

---

## Traceability Matrix

| Code Location                      | Confluence Doc | Jira Epic      |
| ---------------------------------- | -------------- | -------------- |
| gaqno-shell-ui/pages/admin/        | 01, 02, 05     | EPIC-1         |
| @gaqno-backcore/types/shared       | 01, 04         | EPIC-2         |
| @gaqno-frontcore/types/shared      | 04             | EPIC-2         |
| gaqno-finance-service DTOs         | 03, 04         | EPIC-2, EPIC-4 |
| gaqno-finance-ui/lib/api-client.ts | 02, 05         | EPIC-3         |
| gaqno-rpg-ui/useMasterDashboard    | 05             | EPIC-3         |
| gaqno-admin-ui hooks               | 02             | EPIC-5         |
| gaqno-saas-ui useCostingData       | 02             | EPIC-5         |
| gaqno-admin-service/health         | 06             | Health Dashboard Epic |
| gaqno-admin-ui/pages/health        | 06             | Health Dashboard Epic |

---

## Feature: Health Dashboard (Implemented)

**Jira cards:** [HEALTH-DASHBOARD-IMPLEMENTATION-CARDS.md](./HEALTH-DASHBOARD-IMPLEMENTATION-CARDS.md)  
**Confluence:** [06-Health-Dashboard](../confluence/06-Health-Dashboard.md)

Epic + 5 Stories + Tasks for the real-time Health Dashboard (CI/CD, self-healing, agents, releases).
